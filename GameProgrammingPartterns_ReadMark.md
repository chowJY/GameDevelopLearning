# 游戏设计模式读书笔记

## 序：如何阅读本书？

第一部分是介绍并划分书的内容框架，略。

第二部分是重放设计模式。介绍了六中基本的设计模式（拓展阅读：大话设计模式）。在阅读的过程中可以思考以下问题：

1. 该模式的定义是什么？它实际表达的意思是什么
2. 该模式是用来解决什么问题的？
3. 该模式的实现途径有哪些？
4. 该模式的实现动机有哪些？（即你在什么情境下可以考虑使用该模式？）

第三部分是十三种对游戏有用的设计模式，分为了四类：序列模式，行为模式，解耦模式以及优化模式。作者分别对这四种模式进行了规范化的讲解。届时将直接采取书中结构进行总结。

## 第二部分 重访设计模式

### 第一章  命令模式

**定义：** 将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求进行排队或记录请求日志以及支持可撤销的操作。

简而言之，就是将一条命令（一个方法的调用）封装到一个对象内部，从而实现可以对命令进行记录、排序以及撤销等操作的模式。

**实现途径：** 

2. 代码支持闭包（闭包的定义：闭包就是能够读取其他函数内部变量的函数。）
3. 定义一个Command的基类，通过不同的实现来执行接收到的命令。将命令的执行者参数化的传给函数。实现命令的接收和命令的执行的隔离。

**动机：** 在游戏的开发过程中会产生许多指令类，为了能更容易的实现这些类，定义一个具体的基类，包含一些能定义行为的高层方法。同时我们通过这种方法，还可以用队列实现命令的记录，从而实现游戏的重放，游戏的行为的撤销和重做等 操作。

### 第二章  享元模式

**定义：** 使用共享对象可有效的支持大量的细粒度的对象。通俗的说, 就是将类的通用属性抽出来,建立对象池,以达到限制对象数量的效果。

**用途：** 共享一个通用属性对象，有效地减少对象的数量，减少资源的浪费。

**途径：** 抽离相近对象的共同属性，单独构造一个类。**注意** 其成员基本都是`const`类型，防止引用的单位对其进行更改。

**享元模式的一个有效例子：**

创造地形时，只需要将不同的属性的地形（草地、沙地、山坡、河流等）创建单个对象，每个区块只需要对其进行引用即可，将上千个地形对象的渲染降低到了个位数。

### 第三章 观察者模式

**定义：** 对象的一种一对多的依赖关系。当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并自动更新。

**用途：** 通过通知的形式进行程序之间的通信，来实现事件的发生管理。

